#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# í˜„ì¬ ë¸Œëœì¹˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
branch_name=$(git symbolic-ref --short HEAD)

# ë³´í˜¸ëœ ë¸Œëœì¹˜ íŒ¨í„´ (main ë˜ëŠ” develop)
protected_branch_pattern="^(main|develop)$"

# í˜„ì¬ ë¸Œëœì¹˜ê°€ ë³´í˜¸ëœ ë¸Œëœì¹˜ì¸ì§€ í™•ì¸
if echo "$branch_name" | grep -Eq "$protected_branch_pattern"; then
  echo "ğŸš« '$branch_name' ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ ì»¤ë°‹í•˜ëŠ” ê²ƒì€ ê¸ˆì§€ë˜ì–´ ìˆìŠµë‹ˆë‹¤!"
  echo "ğŸ’¡ ë³„ë„ì˜ ì‘ì—… ë¸Œëœì¹˜ë¥¼ ìƒì„±í•˜ì—¬ ì‘ì—…í•˜ì„¸ìš”."
  exit 1
fi

echo "âœ… '$branch_name' ë¸Œëœì¹˜ì—ì„œ ì»¤ë°‹ ê°€ëŠ¥í•©ë‹ˆë‹¤."
